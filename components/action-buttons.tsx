"use client"

import { useEffect, useState } from "react"
import { Button } from "@/components/ui/button"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuShortcut,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import { Download, Mail } from "lucide-react"

// const asciiLogo = `
//                                     %#*****##%
//                                %*===============+#@
//                             %++===================++*
//                           #+===++*%        %*++=======+%
//                         %+===+#               @+=======++
//                        *==++%                   %+=======+#
//                       +==+#                       *+=======*
//                     %+==+@                         *========*
//                    %+=+#                            *+======+#
//                    +==#                +------=#     +=======+
//                   *++%    %%#********=-----------#   #+=======*
//                  %%  #=---------------------------+  %+=======+
//                  #+--------------------------------#  +=======+%
//                +-----------------------------------#  +=======+%
//             @=-------------------------------------#  +=======+%@@
//            +---------------=+*%     --------------+  %+=======+@@%%@
//           =------------+             =-----------#   #+=======*  @%%@
//         %-----------+    @@@@@         *=-----+%     +========%   @%%@
//        @----------#   @@%%%%%%%%@                   +========*     @%%@
//        =--------*    @%%%%%%%%%%%@@                #========+@     @@%%@
//       *--------%    @%%%%%%%%%%%%%%@          @%%%#+=======+%       @%%%@
//       =------=     @%%%%%%%%%%%%%%%@       @*++===========+%         @%%@
//      %------=%     @%%%%%%%%%%%%%%%@      *==============+%          @%%@@
//      #------#      @@%%%%%%%%%%%%%%@     #==============+            @@%%@
//      #-----=        @@%%%%%%%%%%%%@      +==============+@           @@%%@
//      %-----*          @@%%%%%%%%%%@      +==============+%           @@%%@
//       =----*            @@@%%%%%%%%@@    *==============+            @%%%@
//       *----=               @%%%%%%%%@@    +============+%           @@%%@@
//        =----#               @%%%%%%%%%@@   %+========+#            @@%%%@
//         =----#               @%%%%%%%%%%@@    %#**##              @@%%%@
//          -----+               @%%%%%%%%%%%%@@                   @@%%%%@
//           *-----+              @@%%%%%%%%%%%%%@@@@@        @@@@%%%%%%@
//             +------*@            @@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@
//               #--------=+#         @@%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@
//                  #+----------------=% @@%%%%%%%%%%%%%%%%%%%%%%@@
//                        %*+==----=+*#%     @@%%%%%%%%%%%%%%@@@
//                                                @@@@@@@@
// `;

const asciiLogo = `
                                                        %%#####%%
                                                  *++===============++*
                                              +===========================+%
                                           ++===============================++
                                        %=========+++#        #++===============*
                                      #+=======+#                  *+=============*
                                     +======+*                        +=============*
                                   *+=====+                             +============+
                                  +=====+                                #+===========+*
                                %+====+#                                   +============+
                               *+====*                                      +============+
                              *====+%                                        +============+
                             *====+                                           +============*
                            #====*                          %+=---=*          %+===========+%
                           #+==+*                        =-------------*       +============+
                           +==+#           %##**+***##%=-----------------*      +============#
                          ++*%    #+=-------------------------------------=     +============*
                              =--------------------------------------------=    +============+
                          *-------------------------------------------------    *============+
                        ----------------------------------------------------=   #============+%
                     +------------------------------------------------------=   #============+%
                   =--------------------------------------------------------    *============+  @%@
                 *----------------------------=++**##----------------------=    +============+  @%%@
                -----------------------+@             --------------------=     +============+  @%%%@
              #--------------------*                   =-----------------*      +============#   @%%%%@
             +-----------------=                         =-------------#       +============+     @%%%%@
            +----------------#      @@@%%%%%@@              #+=--==*          %+============#      @%%%%@
           *---------------%     @@%%%%%%%%%%%%%@                             +============+        @%%%%@
          #--------------%      @%%%%%%%%%%%%%%%%%@                          +============+%         @%%%%@
          -------------*      @%%%%%%%%%%%%%%%%%%%%@                        +=============*          @%%%%@
         *------------       @%%%%%%%%%%%%%%%%%%%%%%@                  @%%@+=============+            @%%%%@
         -----------=        @%%%%%%%%%%%%%%%%%%%%%%%@            %++===================+             @%%%%%@
        #----------=         @%%%%%%%%%%%%%%%%%%%%%%%@          #======================+               @%%%%%
        +----------          @%%%%%%%%%%%%%%%%%%%%%%%@         +=====================+*                @%%%%%@
        =---------           @%%%%%%%%%%%%%%%%%%%%%%%         +=====================+#                  %%%%%@
        =--------+            @%%%%%%%%%%%%%%%%%%%%%@        +======================+                   @%%%%@
        =--------%             %%%%%%%%%%%%%%%%%%%%@         +======================+#                  @%%%%%
        +--------               @%%%%%%%%%%%%%%%%%%@         +=======================#                  @%%%%@
        *-------=                 @@%%%%%%%%%%%%%%%%@        +======================+                  @%%%%%@
         --------                      @%%%%%%%%%%%%%@       *+=====================*                  @%%%%%@
         =-------                       %%%%%%%%%%%%%%@@      +====================+                   @%%%%%@
         %-------*                       %%%%%%%%%%%%%%%@      *+=================+                   @%%%%%@
          *-------                        @%%%%%%%%%%%%%%%@      *==============+                    @%%%%%%@
           =-------                        @%%%%%%%%%%%%%%%%@       *+++===+++                      @%%%%%%@
            =-------                        @%%%%%%%%%%%%%%%%%@@                                  @%%%%%%%@
             =-------=                       @%%%%%%%%%%%%%%%%%%%%@                             %%%%%%%%%@
               --------+                       @%%%%%%%%%%%%%%%%%%%%%@@@                    @@%%%%%%%%%%@
                +---------                      @%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@      @@@@%%%%%%%%%%%%%%
                  +----------*                    @@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@
                    #------------=*                 @%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@
                       +------------------+**#%%%%%%   @%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@
                           *-------------------------=    @%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@
                                 +=-------------------=+     @@%%%%%%%%%%%%%%%%%%%%%%%%%%@@
                                                                  @@@@%%%%%%%%%%%%%%@@@
`;
const asciiTitle = `
                              ....
 .......              ........----:.                       .......
 .:===-.     ....     :-===...====:.                       .-====..
 ..====:.   .====:   .-===-. ......                       .-======.
  .-===-.   -====-.  .-===:  .-==-:  .-========-..       .-===-====.      :-========:.     :=========:.     ..========.
  .:+++=:  :=++++=:  :=++=.  .=++=:  .=++++++++++-.     .:+++-.-+++=      :=++++++++++-.   -+++++++++++:.   -++++++++-.
   .=+++-..=++-=++=..-+++-.  .=++=:  .=+++:...=+++:.   .:+++=. .=+++-     -+++=....=+++-.  -+++=...:=+++-. .+++=:......
   .:+++=.-+++.:+++-:=+++.   .=++=:  .++++:  .-+++-.   .+++=:   :++++:    -+++=.   :++++:  -+++=    :++++.  =+++++=:.
    .=***-+**: .=**==+**-.   .+**+:  .+**+:   -***-.  .=*************+.   -+**=.   .+**+:  -+*+=    :+**+.  ..=++****+..
    .:******=  ..+*****+.    .+**+:  .+***:   -***=.  -***************=.  -***=. ..-***+:  =***=   .-***=.  .   .:+***=.
     .=*****:   .-*****-.    .+**+:  .+***:   -***=. .****-       :****-. -*****++*****-.  =*****+******:. .**+=-=+***=.
      :+***-.    .+***+.     .+**+:  .****:   -***=..+***+.        =***+: -**********=:    =**********=..  :*********=.
                                                                          -*##+.....       =###+.....       ........
..........................................................................=###+............=###+........................
..........................................................................-***=............=***=........................
........................................................................................................................
........................................................................................................................
........................................................................................................................
`;

export function ActionButtons() {
  const [isMac, setIsMac] = useState(navigator.platform.toUpperCase().indexOf('MAC') >= 0);

  useEffect(() => {
    const isMacOS = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
    setIsMac(isMacOS);

    const handleKeyDown = (event: KeyboardEvent) => {
      const modifier = isMacOS ? event.metaKey : event.ctrlKey;

      if (event.shiftKey && modifier) {
        if (event.key === 'P' || event.key === 'p') {
          event.preventDefault();
          handlePDFResumeDownload();
        } else if (event.key === 'D' || event.key === 'd') {
          event.preventDefault();
          handleWordResumeDownload();
        }
      }
    };

    document.addEventListener("keydown", handleKeyDown);

    console.dir(asciiLogo);
    console.dir(asciiTitle);

    return () => {
      document.removeEventListener("keydown", handleKeyDown);
    };
  }, []);
  const handlePDFResumeDownload = () => {
    const link = document.createElement("a");
    link.href = "/MitchellWintrow_Resume.pdf";
    link.setAttribute("download", "MitchellWintrow_Resume.pdf");
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
  const handleWordResumeDownload = () => {
    const link = document.createElement("a");
    link.href = "/MitchellWintrow_Resume.docx";
    link.setAttribute("download", "MitchellWintrow_Resume.docx");
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }

  const handleContactClick = () => {
    // This can be expanded to open a contact modal or navigate to contact page
    window.location.href = '/contact';
  }

  return (
    <div className="flex flex-col sm:flex-row gap-4">
      <DropdownMenu>
        <DropdownMenuTrigger asChild>
          <Button
            variant="secondary"
            className="min-w-[200px] font-bold"
          >
            <Download className="mr-2 h-4 w-4" />
            My Resumé
          </Button>
        </DropdownMenuTrigger>
        <DropdownMenuContent className="w-58" align="start">
          <DropdownMenuItem onClick={handlePDFResumeDownload}>
            <Download className="mr-2 h-4 w-4" />
            My Resumé (PDF)
            <DropdownMenuShortcut>{isMac ? "⇧⌘P" : "⇧Ctrl+P"}</DropdownMenuShortcut>
          </DropdownMenuItem>
          <DropdownMenuItem onClick={handleWordResumeDownload}>
            <Download className="mr-2 h-4 w-4" />
            My Resumé (Word)
            <DropdownMenuShortcut>{isMac ? "⇧⌘D" : "⇧Ctrl+D"}</DropdownMenuShortcut>
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
      <Button
        variant="secondary"
        className="min-w-[200px] font-bold"
        onClick={handleContactClick}
      >
        <Mail className="mr-2 h-4 w-4" />
        Contact Me
      </Button>
    </div>
  )
}